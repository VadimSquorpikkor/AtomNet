<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=0.8">
    <META charset="utf8">
    <title>AdjustmentDB</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <script type="text/javascript" src="../include.js"></script>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">

    <script>window.addEventListener('scroll', trackScroll)</script>
</head>


<body>

<a class="to_page_top" title="Наверх">&uparrow;</a>

<div class="menu_and_main_div">

    <div class="header_div_2">
        <input title="" name="menu_btn" type="button" value="Меню" onclick="show_menu()" class="menu_button"
               id="menu_button">

        <a href="../menu/index.html">Главная</a>
        <a href="">AdjustmentDB и AdjustmentWeb</a>

        <div class="spoiler_menu" id="menu" style="display: none"></div>
    </div>

    <div class="left_side_menu">
        <div id="menu_left" class="spoiler_menu"></div>
    </div>

    <script>
        includeMenu("menu_left", REG_MENU, OPEN);
        includeMenu("menu", REG_MENU, CLOSE);
    </script>

    <div class="main_div">

        <h1>AdjustmentDB и AdjustmentWeb</h1>

        <p>
            Комплекс приложений для отслеживания устройств. Основная идея: имеем базу данных, в которую
            сохраняем имя и серийный номер устройства, для каждого устройства можно сохранить его статус
            ("На регулировке", "На линейке" и т.д.) таким образом в любой момент времени можно будет отследить
            устройство по егу типу и/или статусу, например узнать, сколько AT2503 (и с каким номером) находятся на
            линейке или на каком этапе находится поступивший в ремонт прибор. При этом добавление устройства в базу
            данных происходит в полуавтоматическом режиме -- используя специальное приложение путем сканирования
            QR-кода, расположенного на корпусе устройства. Этот код предварительно генерируется с помощью специального
            приложения. Так как база данных расположена на облаке, то любые изменения данных будут немедлено
            отображаться на всех приложениях, подключенных к базе. Комплекс состоит из:</p>
        <ul>
            <li>Облачной базы данных</li>
            <li>Веб приложения (веб страница) AdjustmentWeb для просмотра серийных устройств</li>
            <li>Веб приложения (веб страница) Adjustment??? для просмотра ремонтных устройств</li>
            <li>Приложение для Android для добавления новых записей в Базу Данных</li>
            <li>Генератора QR-кода</li>
        </ul>

        <p>Все приложения не исползуют собственное хранилище данных, а все данные берут из облачной БД, т.е. все данные
            являются общиими для всех приложений, любые изменения в БД немедленно отображаются во всех приложениях.
        </p>

        <p>Для того чтобы посторонние люди не смогли сами сгенерировать QR-код и с помощью его не смогли бы добавить
            несуществующие данные в БД, применяется шифрование строки перед тем, как сгенерировать из неё QR-код. В
            программе-сканнере кода стоит дешифратор. Таким образом, не зная ключа практически невозможно постороннему
            человеку добавить свои данные в БД.</p>


        <h3>Облачная база данных</h3>

        <p>База данных расположена на Firebase, раздел Cloud Firestore. Доступ к БД напрямую, не испоьзуя клиентские
            приложения есть только у разработчика, для пользователя этот доступ закрыт. Все вопросы по
            добавлению и корректировке, экспорту и резервному копированию данных решать через разработчика.</p>
        <p>Надо помнить, что список устройств и список статусов не хранится ни в одном приложении и не содержится в коде
            сайта. Эти данные хранится в БД в отдельных таблицах и динамически добавляются при старте приложения. Плюсы
            такого решения -- 1) невозможно добавить похожие типы устройств ("АТ3509", "3509", "ат3509"); 2) при
            необходимости добавить новый тип или статус, этот тип просто добавляется в БД (обращаться к разработчику),
            при этом во всех приложениях эти новые типы добавятся автоматом (без перезагрузки и без скачивания и
            установки новой версии с новыми типами). Так устроены приложения.
        </p>

        <h3>AdjustmentWeb</h3>
        <p>AdjustmentWeb -- это веб-приложение (веб страница) для просмотра серийных устройств и просмотра сведений о
            ремонтных приборах</p>

        <h3>AdjustmentDB. Приложение для Android</h3>

        <img src="../imgs/adjustment/adjustmentDB.png" width="547">

        <p>
            Единственным способов изменить или добавить новые данные в БД является валидация устройства по его QR-коду
            с помощью приложения для Android "AdjustmentDB". Для этого нужно:
        </p>
        <ul>
            <li>Запустить приложение AdjustmentDB</li>
            <li>Нажать кнопку сканнера</li>
            <li>В открывшемся окне сканнера навести камеру на QR-код, приложение автоматически распознает строку</li>
            <li>После этого станут доступны поля для дополнения/изменения данных для добавления их в БД</li>
        </ul>
        <p>В строке, полученной из qr-кода содержится название устройства ("AT3509") и его внутренний номер ("1234").
            В момент подключения к БД (после успешного сканирования кода) приложение запускает поиск такого устройства
            в базе, и, если устройство найдено (было уже добавлено ранее), считывает все данные для этого устройства
            (серийный номер, статус устройства и т.д.) и заполняет этими данными поля для данных в приложении
            AdjustmentDB. Если устройство найдено не было, поля данных будут заполнены только именем устройства и его
            внутренним номером (которые содержались в коде). При неоюходимости можно добавить дополнительные данные.
            После нажатия кнопки "Добавить в БД" данные в БД будут немедленно обновлены. При этом во всех других
            приложениях немедлено отобразятся эти обновленные данные (без перезагрузки)


        <h3>Генератора QR-кода</h3>
        <p>Особенность генератора (в отличии от многих аналогичных) -- сначала генератор шифрует строку и только после
            этого преобразует строку в QR-код. Чтобы сгенерировать код нужно:</p>
        <ul>
            <li>Выбрать из выпадающего списка тип устройства ("БДКГ-02")</li>
            <li>Ввести внутренний номер (не серийный)</li>
            <li>Ввести ключ. Если ключ не ввести или ввести неверный, то сгенерированный код не будет распознан
                сканнером Android приложения.</li>
        </ul>
        <p>Для генерации кодов для ремонтных устройств используется другая логика.</p>
        <ul>
            <li>Выбрать из выпадающего списка "Ремонт"</li>
            <li>Ввести порядковый номер ремонта (идентификатор -- четырехзначное число).</li>
            <li>Ввести ключ.</li>
        </ul>

    </div>
</div>
</body>
</html>