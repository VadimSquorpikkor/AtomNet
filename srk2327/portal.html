<!DOCTYPE html>

<html>
<head>
    <META charset="utf8">
    <title>Портальный монитор</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <script type="text/javascript" src="../include.js"></script>
    <script type="text/javascript" src="../my_script.js"></script>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">

</head>

<body>

<div class="header_div_2">
    <input title="" name="menu_btn" type="button" value="Меню" onclick="show_menu()" class="menu_button"
           id="menu_button">

    <a href="../menu/index.html">Главная</a>
    <a href="../srk2327/2327.html">СРК</a>
    <a href="">Портальный монитор</a>


    <div class="spoiler_menu" id="menu" style="display: none"></div>
    <script>
        includeHTML();
    </script>
</div>

<div class="left_side_menu">

    <div id="menu_left" class="spoiler_menu"></div>
    <!--<div w3-include-html="menu.html"></div>-->
    <script>
        includeHTML(open);
    </script>
</div>


<div>
    <h1>Портальный монитор</h1>
    <!--<img src="../imgs/under_construction.jpg">-->
    <img src="../imgs/portal/fura.png" width="600">


    <div style="align-items: center"><span class="attention_big" style="font-size: 30px">Важно!</span></div>
    <p><span class="attention_big">До того, как отдать блоки в контейнерах на сборку, необходимо записать
        внутренние номера БД в зеленую папку &mdash; после того, как контейнеры будут подключены к системе, узнать
        номер будет не просто. Пульт с новой версией прошивки подключается к компьютеру только с помощью ПО ARGUS,
        а в этой программе нет возможности узнать скорость счета по каждому БД отдельно, поэтому данные скорости счета
        для протокола поверки необходимо снимать до установки контейнеров в шкаф.</span></p>


    <div class="nice_details">
        <details>
            <summary>Настроить пульт ПУ-АТ900</summary>
            <br>
            <div class="nice_details">
                <details>
                    <summary>Прошивка пульта</summary>
                    <br>
                    Получить на сладе:
                    <ul>
                        <li>Микросхему AT89S52-24PU</li>
                        <li>Микросхему AT27C512R</li>
                        <li>Батарейку Panasonic 2032</li>
                        <li>Микросхему AT89C2051(одна для УС и одна для МДВ)</li>
                    </ul>
                    Получить со сборки комплект для пульта
                    <img src="../imgs/pu900/900-1.jpg" width="700">

                    <div class="yellow_back">
                        512-е микросхемы записываются только один раз, поэтому если есть необходимость
                        поэксперементировать с новой прошивкой, можно воспользоваться вот такой микросхемой,
                        она перезаписываемая:

                        <img src="../imgs/portal/06.jpg" width="600">

                    </div>

                    Прошить M27C512 <span class="attention">портальной прошивкой</span>:
                    <img src="../imgs/pu900/900prosh.jpg" width="400">
                    <ul>
                        <li>Подключить программатор</li>
                        <li>Запустить программу <b>ChipProg USB</b></li>
                        <li>Вставить микросхему (Ключ вверху!)</li>
                        <li>Выбрать микросхему ST Microelectronics M27C512 (Select device)</li>
                        <li>Выбрать прошивку &mdash; <span class="attention">_Portal.hex</span> (18.06.2019)
                            <img src="../imgs/pu900/900.png" width="900">
                        <li>Device status: In socket. Ready</li>
                        <li>Выбрать Auto programming</li>
                        <li>Кликнуть Execute (или кнопку "Start" на программаторе)</li>
                        <li>После прошивки наклеить на микросхемк наклейку с версией прошивки
                    </ul>
                    <img src="../imgs/pu900/900-3.jpg" width="600">
                    Прошить микросхемы (AT89C2501) для устройства сигнализации (УС &mdash; прошивается <span
                        class="attention">11 адресом</span>)
                    и модуля дискретного
                    ввода (МДВ &mdash; прошивается <span class="attention">12 адресом</span>)
                    Прошивается микросхема аналогично 512-й, только необходимо выбрать в программе нужный тип микросхемы
                    (AT89C2501), и прошивку (<i>ppp11s.a03</i> для УС, <i>ppp12s.a03</i> для МДВ)<br>
                    <img src="../imgs/pu900/us.png" width="600">
                    <ul>
                        <li>После на микросхему нанаклеить наклейку с адресом</li>
                        <img src="../imgs/pu900/900-4.jpg" width="400">
                    </ul>
                </details>
            </div>
            <h1>Настройка пульта</h1>
            <ul>
                <li>Микросхему AT89S52, прошитую M27C512 и батарейку установить на плату</li>
                <li>Установить перемычку в режим настройки.</li>
                <li>Подключить адаптер питания</li>
                <li><span class="attention">Перед тем, как отдать плату пульта на сборку, обязательно проверить
                    срабатывание ВСЕХ клавиш клавиатуры</span>
                    <img src="../imgs/pu900/900-5.jpg" width="800">
                    <!--<img src="imgs/pu900set/01.jpg" width="400"></img>-->
                <li>Подстроечным резистором выставить правильный уровень яркости сегментов ЖКИ.</li>

                <img src="../imgs/pu900set/001.jpg" width="400">
                <li>Вот что будет на экране:</li>
                <img src="../imgs/pu900set/02.jpg" width="400">
                <li>Каждая буква "е" на экране &mdash; это адрес каждого БД, таким образом к одному пульту можно
                    подключить до десяти БД
                </LI>

                <li>Клавишами "вправо" "влево" перемещаем курсор, клавишей "ввод" можно выбрать два варианта
                    отображения: <i>БД
                        включен в систему</i> и <i>БД отсутствует</i>.
                    Номер позиции соответствует адресу для БД (т.е. от 1 до 10)
                    <a class="attention">Каждому</a> из подключенных датчиков, с помощью цифровой клавиатуры,
                    необходимо определить тип БД &mdash; для портальных мониторов это клавиша "5" (БДРМ-05)

                    <span class="attention">Для БДКГ в контейнерах (-11/1, -35, -19), а точнее для 941-х адаптеров с
                        подключенными контейнерами, тип БД выбирается "БДРМ-05" (клавиша 5)</span>,
                    если в состав портального монитора входит БДКН, то для такого БД выбрать соответствующий тип
                    нейтронного БД (клавиша 3, 4 или 6)
                </li>
                <img src="../imgs/portal/pult/01.jpg" width="400">
                <li><span class="attention">Ввод параметров подтверждается клавишей "Ввод"</span></li>
                <li>К каждому блоку подключить сигнализацию и МДВ. Клавишами "вправо" "влево" выбрать БД, затем клавишей
                    "1" и "2" подключить сигнализацию и МДВ с 11-м или 12-м адресом соответственно. Стереть адрес
                    можно клавишей "выход".
                </li>
                <img src="../imgs/portal/pult/02.jpg" width="400">
                <li>Период опроса выставить 1 секунду.</li>
                <img src="../imgs/portal/pult/03.jpg" width="400">
                <li>Адрес пульта &mdash; 1</li>
                <img src="../imgs/portal/pult/04.jpg" width="400">
                <li>Сбросить историю клавишей "0".</li>
                <img src="../imgs/portal/pult/05.jpg" width="400">
                <li><span class="attention">После завершения настройки вернуться на начальный экран и нажать клавишу "Выход" для сохранения введенных параметров!</span>
                </li>
                <li>Отключить питание и переставить перемычку в рабочий режим.</li>
                <img src="../imgs/pu900set/08.jpg" width="400">
                <li>Включить питание. Дождаться загрузки Пульт попытается опросить все настроенные в нем адреся БД и
                    УС и, не
                    найдя их, выдаст соответствующее предупреждение &mdash; при этом зеленый диод будет мигать, это
                    значит в
                    работе пульта есть какая-то ошибка.
                    Прежде всего необходимо установить новый пароль &mdash; "555". По умолчанию паролем является
                    время ПУ,
                    поэтому необходимо зайти в режим времени,
                </li>
                <img src="../imgs/pu900set/10.jpg" width="400">
                <li>выбрать время ПУ и запомнить его</li>
                <img src="../imgs/pu900set/11.jpg" width="400">
                <li>(так, пароль ПУ с картинки будет "226").
                    После этого зайти в режим изменения пароля и выбрать "изменить пароль".
                </li>
                <img src="../imgs/pu900set/09.jpg" width="400">
                <li>Ввести запомненное время, а в качестве нового пароля ввести 555.</li>
                <img src="../imgs/pu900set/12.jpg" width="400">
                <li>После ввода нового пароля ПУ выдаст сообщение о принятии нового пароля. Теперь паролем ПУ будет
                    555
                </li>
                <img src="../imgs/pu900set/13.jpg" width="400">
                <li>Установить Дату и время ПУ</li>
                <img src="../imgs/pu900set/15.jpg" width="400">
                <li>Настроить "Период ложных, ч". Ставить 10 часов:
                </li>
                <img src="../imgs/portal/pult/07.jpg" width="400"/>
                <li>и параметр фона, ставить 103:</li>
                <img src="../imgs/portal/pult/06.jpg" width="400"/>

                <li>Пульт настроен. После подключения к нему всех БД и УС пульт не должен выдаваить никаких
                    ошибок.
                </li>
                <li class="attention">Если пульт выдает ошибку Еппром &mdash; перезагрузить пульт, ошибка пропадет
                </li>
                <li class="attention">Если пульт выдает ошибку сети &mdash; зайти в настройки сети, одключить все
                    БД, а после
                    загрузки пульта опять включить, ошибка пропадет
                <li class="attention">Если пульт выдает ошибку "Внутренняя ошибка" &mdash; то это означает,
                    что в пульте не выставлена дата/время (может появиться, например, если из пульта
                    достать-вставить батарейку)
                </li>
            </ul>


        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>Настроить адаптеры интерфейсные АИ-941</summary>

            <br>Обмен с БДКГ-11 и БДКГ-35 идет по 232-му интерфейсу, а сама СРК работает по 485-му. Для связи БД с
            системой
            используется адаптер АИ-941.
            <div class="yellow_back">Сейчас контроллеры для 941-го адаптера ПРОШИВАЮТСЯ ДО УСТАНОВКИ НА
                ПЛАТУ, <span class="attention">но всё равно лучше перепрошить адаптер, так как не известно, какой
                    прошивкой, контейнерной или обычной, были прошиты контроллеры</span>
            </div>
            <ul>
                <div class="nice_details">
                    <details>
                        <summary>
                            Прошивка 941-го адаптера
                        </summary>

                        <img src="../imgs/941/new/01.jpg" width="800">

                        <p class="yellow_back">Удобнее всего подавать питание на плату не через djk-разъем, а через
                            USB-COM адаптер &rarr;
                            КК2D5, таким образом
                            после прошивки через адаптер-USB не нужно будет переподключать провода питания, а сразу же
                            проверить обмен
                            подключив, например, БДКГ-11
                        </p>
                        <img src="../imgs/941/new/08.jpg" width="800">
                        <ul>
                            <li>Вставить перемычку</li>
                            <li>Подключить USB-COM адаптер через КК2D5 (на этапе прошивки КК будет выполнять только
                                функцию питания, во
                                время
                                проверки через USB-COM адаптер будет подключаться к компу)
                            </li>
                            <li>Подключить адаптер-USB <span class="attention">не подключая коричневый провод (питание "+")</span>
                            </li>
                            <li>Прошить с <a href="../other/flip.html">помощью Flip</a>.
                                Прошивка: если для БДКГ-11/1 или БДКГ-35, то прошивка
                                <span class="attention">__SmartRS232Portal.hex</span> (07.08.2017)
                                (папка Prosh &rarr; SRK &rarr; AI-AT941 portal monitor),
                                если для БДРМ-05, то <span
                                        class="attention">__SmartRS232PortalBDRM05.hex (30.05.2017)</span></li>
                            <li>После прошивки не забыть <span class="attention">достать перемычку!</span></li>
                            <li><span
                                    class="mark_green">Если не шьется &mdash; проверить ток (в разрыв 12V питания), должно
                                быть не более 50mA, а лучше перед включением питания замкнуть пинцетом 32-й контакт с землей:</span>

                                <img src="../imgs/portal/05.jpg" width="700">
                            </li>
                        </ul>


                    </details>
                </div>

                <span class="attention">После прошивки обязательно проверить работу адаптера.</span> Очень неприятно в
                день отправки обнаружить отсутствие обмена в адаптере или не работающий МРП. Чтобы проверить работу
                941-го адаптера:
                <ul>
                    <li>Отключить адаптер USB</li>
                    <li>Подключить ранее отключенный коричневый провод питания</li>
                    <li>Подключить какой-нибудь блок с 232-м интерфейсом, например БДКГ-11/1</li>

                    <img src="../imgs/941/new/07.jpg" width="800">
                    <img src="../imgs/941/new/9.jpg" width="800">

                    <li>На компьютере запустить SARKtech</li>
                    <li>Выбрать тип блока "БДКГ-02"</li>
                    <li>Скорость "9600"</li>
                    <li>Адрес "1"</li>
                    <li>Нажать "Установить связь". Адаптер должен сразу же подключиться</li>
                    <li>На вкладке "Монитор" проверить наличие счетных импульсов ("Скорость счета")</li>
                    <!--        <p class="yellow_back">Не стоит беспокоиться об отсутствии показаний мощности дозы &mdash; их и не должно быть,
                                это нормально</p>-->
                    <li>Нажать "Запись адреса" и ввести необходимый номер адреса.
                        <span class="attention">ОБЯЗАТЕЛЬНО ЗАДАВАТЬ ДАЖЕ 1-ЫЙ АДРЕС!! 1-й адрес задан по-умолчанию, но если его
                не задать самому, пульт его НЕ УВИДИТ (хоть он вроде как и первый)</span>
                    </li>
                </ul>
                <!--После прошивки и проверки работоспособности адаптера, на контроллер наклеить наклейку
                     с версией прошивки и номером адреса:-->
                <img src="../imgs/941/6.jpg" width="800"/>
                <!--<li>Прошить и настроить АИ-941 по <a href="../srk2327/941adapter.html">инструкции</a></li>-->
                <li>Каждому адаптеру присвоить адрес от 1 до 4, на контроллер каждого адаптера наклеить наклейку с
                    версией прошивки и адресом
                </li>
                <li>Отдать на сборку</li>
            </ul>

        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>Настройка БДКГ-11/1</summary>
            <br>
            Взять настроенные и прошедшие <span class="line_through">все муки ада</span> линейку БДКГ-11/1
            Прошить контейнерной прошивкой. Но чтобы его прошить, сначала нужно разблокировать загрузчик.
            <!--Чтобы прошить уже прошитый прибор, его перво-наперво необходимо разблокировать:-->

            <ul>
                <li>Подключить БДКГ-11/1 к компьютеру с помощью USB-адаптера. <span class="attention">Линия
                            обмена подключается крест-накрест &mdash; желтый провод подключается к зеленому,
                            зеленый к желтому</span></li>
                <img src="../imgs/portal/g-11/08.jpg" width="350" style="float: left; padding-right: 10px">
                <!--<img src="../imgs/portal/g-11/09.jpg" width="500" style="margin-left: 0">-->
                <img src="../imgs/portal/g-11/11.jpg" width="650" style="margin-left: 0">
                <li>Запустить терминал, нажать "Настройка". Если ответ совпал с запросом, значит Terminal видит
                    блок, можно работать
                </li>
                <img src="../imgs/portal/g-11/02.jpg" width="450">
                <li>Нажать "Внутрисхемный загрузчик". Если ответ совпал с командой, значит БД разблокирован,
                    можно шить. <span class="attention">Если отключить питания &mdash; загрузчик опять
                                заблокируется</span></li>
                <li>Чтобы освободить порт, необходимо закрыть Terminal, либо в выпадающем меню портов выбрать
                    "Off" (так удобнее, если прошивается несколько БД)
                </li>
                <img src="../imgs/portal/g-11/03.jpg" width="450">
                <li>Прошить <a href="../other/flip.html">с помощью Flip</a>. Прошивка: <span class="attention">bdkg11kl.hex</span>
                    (контейнерная)
                </li>
                <li><span class="attention">Обязательно на каждый БД наклеить малярку с адресом, под которым блок будет
                    работать в собранной системе, а в зеленую папку записать внутренний номер и адрес каждого блока</span>
                </li>
            </ul>


            <p>Если система поверяется, то необходимо будет снять скорость счета и заполнить
                <a href="../docs/sertificate/11-1_Pov_Rus.odt">протокол поверки</a>. Расчитать погрешности
                можно <a href="../docs/Расчет%20протоколов%20поверки%20БДКГ11-1%20Портал.ods">здесь</a>.
                Если в системе нет подключения к компу или поверку нужно сделать срочно,
                удобнее всего это делать с еще не установленных в шкафы контейнеров:</p>
            <ul>
                <li>Подключить контейнер к компу через USB-адаптер</li>
                <li>Запустить Background Calibration</li>
                <img src="../imgs/portal/g-11/07.jpg" width="800">
                <li>Снять показания скорости счета на фоне 5 раз (каждый раз нажимая "сброс"), полученные значения
                    записать <a href="../docs/Расчет%20протоколов%20поверки%20БДКГ11-1%20Портал.ods">в таблицу</a>.
                </li>
                <li>Снять показания от источника <sup>137</sup>Cs (10<sup>5</sup> Бк), для этого закрепить источник
                    строго на метке (на кресте) контейнера. Полученные значения
                    записать в таблицу.
                </li>
                <img src="../imgs/portal/g-11/10.jpg" width="800">
                <li>ТО же проделать с остальными контейнерами</li>
                <li> Таблицу с расчетом скопипастить в <a href="../docs/sertificate/11-1_Pov_Rus.odt">протокол
                    поверки</a></li>
                <li>Отдать контейнеры на сборку</li>

            </ul>


        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>Настройка БДКГ-19</summary>
            <br>
            В отличии от БДКГ-11/1, -19 БД не перепрошивается на контейнерную прошивку (такой не существует) и никакое
            время усреднения не изменяется. Поэтому всё, что нужно сделать, это на каждый БД наклеить малярку с
            адресом, под которым блок будет работать в собранной системе, а в зеленую папку записать внутренний номер и
            адрес каждого блока.

            <p>Если система поверяется, то необходимо будет снять скорость счета и заполнить
                <a href="">протокол поверки</a>. Расчитать погрешности
                можно <a href="">здесь</a>.
                <span class="attention">Делать это нужно с еще не установленных в шкафы контейнеров:</span></p>
            <ul>
                <li>Подключить контейнер к компу через USB-адаптер</li>
                <li>Запустить ATAS</li>

                <li>Снять показания скорости счета на фоне 5 раз (каждый раз нажимая "сброс"), полученные значения
                    записать <a href="">в таблицу</a>.
                </li>
                <li>Снять показания от источника <sup>137</sup>Cs (10<sup>5</sup> Бк), для этого закрепить источник
                    строго на метке (на кресте) контейнера. Полученные значения
                    записать в таблицу.
                </li>
                <img src="../imgs/portal/g-11/10.jpg" width="800">
                <li>ТО же проделать с остальными контейнерами</li>
                <li> Таблицу с расчетом скопипастить в <a href="">протокол
                    поверки</a></li>
                <li>Отдать контейнеры на сборку</li>

            </ul>


        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>Настройка БДКГ-35</summary>
            <br>
            <p><span class="attention">!Если в БДКГ-35 уже настроено усреднение, при подключении к 1117 в БД будет
                записано секундное усреднение, и нужно будет опять настраивать усркднение в 0,33 с. Поэтому следует
                избегать подключать БДКГ-35 с настроенным усреднением к БОИ!</span></p>
            <p>Для работы в составе портального монитора, в БДКГ-35 необходиимо изменить время усреднения на 0,33 сек,
                иначе работа
                системы будет некорректной. Для этого:</p>
            <ul>
                <li>Подключить БДКГ-35 к компьютеру с помощью USB-адаптера. <span class="attention">Линия
                            обмена подключается крест-накрест &mdash; желтый провод подключается к зеленому,
                            зеленый к желтому</span></li>
                <img src="../imgs/portal/g-11/08.jpg" width="350" style="float: left; padding-right: 10px">
                <!--<img src="../imgs/portal/g-11/09.jpg" width="500" style="margin-left: 0">-->
                <img src="../imgs/portal/g-11/11.jpg" width="650" style="margin-left: 0">

                <li>Запустить терминал, нажать "Настройка". Если ответ совпал с запросом, значит Terminal видит
                    блок, можно работать
                </li>
                <img src="../imgs/portal/g-11/02.jpg" width="450">
                <li>Проверить, какое время записано в блок, можно командой: <span class="yellow_back_small">03 00 02 00 02</span>
                <li>В ответе будет: <span class="yellow_back_small"><< 01 03 04 <span class="attention">01 04</span> 00 00 0c ba</span>
                    , где <span class="attention">01 04</span> &mdash; это время усреднения блока (260 ms). Чтобы
                    поставить 330 ms, нужно:
                </li>
                </li>набрать команду: <span class="yellow_back_small">06 00 02 01 4a</span>
                <li>Проверить, в ответе должно быть: <span class="yellow_back_small"><< 01 03 04 <span
                        class="attention">01 4a</span> 00 00 0c ba</span></li>
                <li><span class="attention">Обязательно на каждый БД наклеить малярку с адресом, под которым блок будет
                    работать в собранной системе, а в зеленую папку записать внутренний номер и адрес каждого блока</span>
                </li>
            </ul>


            <p>Если система поверяется, то необходимо будет снять скорость счета и заполнить
                <a href="../docs/bdkg-35/(БДКГ-35)%20446.000.doc">протокол поверки</a>. Расчитать погрешности
                можно <a href="../docs/bdkg-35/расчет%20погрешности%20BDKG-35_2.xls">здесь</a>.
                Если в системе нет подключения к компу или поверку нужно сделать срочно,
                удобнее всего это делать с еще не установленных в шкафы контейнеров:</p>
            <ul>
                <li>Подключить контейнер к компу через USB-адаптер</li>
                <li>Запустить Background Calibration</li>
                <img src="../imgs/portal/g-11/07.jpg" width="800">
                <li>Снять показания скорости счета на фоне 5 раз (каждый раз нажимая "сброс"), полученные значения
                    записать <a href="../docs/bdkg-35/расчет%20погрешности%20BDKG-35_2.xls">в таблицу</a>.
                </li>
                <li>Снять показания от источника <sup>137</sup>Cs (10<sup>5</sup> Бк), для этого закрепить источник
                    строго на метке (на кресте) контейнера. Полученные значения
                    записать в таблицу.
                </li>
                <img src="../imgs/portal/g-11/10.jpg" width="800">
                <li>ТО же проделать с остальными контейнерами</li>
                <li> Таблицу с расчетом скопипастить в <a href="../docs/bdkg-35/(БДКГ-35)%20446.000.doc">протокол
                    поверки</a></li>
                <li>Отдать контейнеры на сборку</li>
            </ul>
        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>Настройка и проверка собранного портального монитора</summary>

            <img src="../imgs/portal/01.png" width="800">
            <img src="../imgs/portal/02.jpg" width="800">
            <img src="../imgs/portal/03.jpg" width="800">
            <img src="../imgs/portal/04.jpg" width="800">


        </details>
    </div>

    <div class="nice_details">
        <details>
            <summary>АРГУС</summary>
            <img src="../imgs/portal/argus/a1.jpg" width="1200">
            <img src="../imgs/portal/argus/a3.jpg" width="450">
            <img src="../imgs/portal/argus/a4.jpg" width="450">
            <img src="../imgs/portal/argus/a5.jpg" width="450">
        </details>
    </div>

</div>
</body>
</html>
