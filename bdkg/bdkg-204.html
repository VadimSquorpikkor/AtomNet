<!DOCTYPE html>
<html>
<head>
    <META charset="utf8">
    <title>БДКГ-204</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <script type="text/javascript" src="../include.js"></script>
    <script type="text/javascript" src="../my_script.js"></script>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
</head>

<body>

<div class="header_div_2">
    <input title="" name="menu_btn" type="button" value="Меню" onclick="show_menu()" class="menu_button"
           id="menu_button">

    <a href="../menu/index.html">Главная</a>
    <a href="">Прошивка БДКГ-204</a>

    <div class="spoiler_menu" id="menu" style="display: none"></div>
    <script>
        includeHTML();
    </script>

</div>

<div class="left_side_menu">

    <div id="menu_left" class="spoiler_menu"></div>
    <!--<div w3-include-html="menu.html"></div>-->
    <script>
        includeHTML(open);
    </script>
</div>


<div>

    <h1>Прошивка БДКГ-204</h1>

    <p>

    <ul>
        <li>Подключить питание через ODU разъем &rarr; USB-COM адаптер. (На этапе прошивки &mdash; как питание, на этапе
            проверки
            работы &mdash; как обмен)
        </li>
        <li>Подключть программатор</li>
    </ul>

    <img src="../imgs/204/204-8.jpg" width="800">

    <p>
    <ul>
        <li>Запустить STM32-LINK</li>
        <img src="../imgs/204/204_4.png" width="700">
        <li>Target &rarr; Connect</li>
        <li>Target &rarr; Program & Verify</li>
        <img src="../imgs/204/204_2.png">
        <li>Выбрать прошивку (кнопка "Browse")</li>
        <span class="attention">Есть два типа прошивки, для старых приборов с памятью DATA-FLASH, и для новых, с памятью FRAM.
        Если прошить не той прошивкой, прибор не подключится</span>

        <img src="../imgs/204/mem2.jpg" width="700"/>
        <li>Нажать "Start"</li>
    </ul>


    <div class="yellow_back">
        <details>
            <summary>Если появляется окно с ошибкой: "Can not read memory!"</summary>
            <div>
                <p>
                    Если появляется такое окно с ошибкой:
                    <img src="../imgs/204/204_3.png">
                </p>

                <p>
                    Это значит, что устройство уже прошито, и прочитать или перезаписать прошивку нельзя. Чтобы убрать
                    защиту,
                    необходимо сделать следующее

                    <a class="attention">(Внимание! Существующая прошивка будет стёрта!)

                    </a>:
                <ul>
                    <li>Target &rarr; Option Bytes</li>
                    <img src="../imgs/204/204_1.png">
                    <li>Readout Protection &rArr; Disabled</li>
                    <li>Flash Section Protection &rArr; Unselect All</li>
                    <li>Apply</li>
                    <li>Защита снята, прошивка стерта</li>
                </ul>
            </div>
        </details>
    </div>

    <p>Проверить корректность прошивки можно подключив устройство к SARKtech, тип устройства &mdash; БДКГ-02 (перед
        подключением <a class="attention">обязательно</a> отсоединить, подключить ODU разъёьм):
    </p>
    <p>После проверки наклеить на плату наклейку с версией прошивки:</p>
    <img src="../imgs/204/204_9.jpg" width="600">
    <ul>
        <li>Отдать на регулировку</li>
        <li>После линейки проверить <a href="file://///Inv-996/журналы градуировок/BDKG204.ods">коэффициенты</a></li>
        <li>Если всё хорошо, отдать на ПСИ</li>
        <li>Проверить на герметичность</li>
        <li>В этом БД фон настраивать не нужно. БД готов</li>
    </ul>
    <div class="yellow_back">
        <p>Удобнее всего прошивать следующим образом: открыть одновременно и STM32-Link и SARKtech и разместить оба
            окна рядом. Прошить в STM, отключить-включить питание блока и сразу проверить в SARK, подключить
            другой блок и т. д. Окна не закрывать.
            <img src="../imgs/204/201_10.png" width="800">
    </div>
</div>

</body>
</html>