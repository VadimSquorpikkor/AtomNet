<!DOCTYPE html>
<html lang="ru">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=0.8" charset="utf8">
    <title>БДКГ-204</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
    <script type="text/javascript" src="../include.js"></script>
    <link rel="shortcut icon" href="../favicon.ico" type="image/x-icon">
</head>

<body>

<div id="left_side_panel" class="left_side_panel">
    <a class="home_button" href="../menu/index.html"></a>
    <a href="javascript:void(0)" class="close_btn" onclick="closeNav()">&times;</a>
    <div class="spoiler_menu" id="menu"></div>
</div>

<a class="to_page_top" title="Наверх">&uparrow;</a>

<div class="menu_and_main_div">

<div class="header_div_2">
    <input title="" name="menu_btn" type="button" value="Меню" onclick="openNav()" class="menu_button"
           id="menu_button">

    <a href="../menu/index.html">Главная</a>
    <a href="bdkg-204.html">Настройка БДКГ-204</a>
    <a href="">Прошивка БДКГ-204</a>
</div>

<div class="left_side_menu">
    <div id="menu_left" class="spoiler_menu"></div>
</div>

<script>
    includeMenu("menu_left", REG_MENU, CLOSE);
    includeMenu("menu", REG_MENU, CLOSE);
</script>


<div class="main_div">
        <span id="girlanda"><script> insertGirlanda(); </script></span>

    <h1>Прошивка БДКГ-204</h1>

    <ul>
        <li>Подключить питание через ODU разъем &rarr; USB-COM адаптер. (На этапе прошивки — как питание, на этапе проверки работы — как обмен, потребление рабочее блока ~75 мА).</li>
        <li>Подключить программатор</li>
    </ul>

<!--    <img src="../imgs/204/204-8.jpg" width="800" alt="изображение не найдено">-->
    <img class="resizable" src="../imgs/204/Настройка_БДКГ-204_Прошивка 1.jpg" width="300" alt="изображение не найдено">
    <figcaption>Подключение</figcaption>

    <div class="attention_block">
        При подключении обращать внимание на расположение 1-ого вывода как при подключении к переходнику, так и при
        подключении к плате обработки БД:

        <div class="image_div" style="background: inherit">
            <figure style="float: left; padding-right: 10px; margin: 0">
                <img class="resizable" src="../imgs/204/Настройка_БДКГ-204_Прошивка 2.jpg" width="300" alt="изображение не найдено">
                <figcaption>Переходник</figcaption>
            </figure>
            <figure style="float: left; padding-right: 10px; margin: 0">
                <img class="resizable" src="../imgs/204/Настройка_БДКГ-204_Прошивка 3.jpg" width="300" alt="изображение не найдено">
                <figcaption>Плата обработки БД</figcaption>
            </figure>
        </div>
    </div>

    <p>
    <ul>
        <li>Запустить STM32-LINK</li>
        <img src="../imgs/204/204_4.png" width="700" alt="изображение не найдено">
        <li>Target &rarr; Connect</li>
        <li>Target &rarr; Program & Verify</li>
        <img src="../imgs/204/204_2.png" alt="изображение не найдено">
        <li>Выбрать прошивку (кнопка "Browse")</li>
        <span class="attention">Есть два типа прошивки, для старых приборов с памятью DATA-FLASH, и для новых, с памятью FRAM.
        Если прошить не той прошивкой, прибор не подключится</span>

        <img src="../imgs/204/mem2.jpg" width="700" alt="изображение не найдено"/>
        <li>Нажать "Start"</li>
    </ul>

    <div class="yellow_back">
        <details>
            <summary>Если появляется окно с ошибкой: "Can not read memory!"</summary>
            <div>
                <p>
                    Если появляется такое окно с ошибкой:
                    <img src="../imgs/204/204_3.png" alt="изображение не найдено">
                </p>

                <p>
                    Это значит, что устройство уже прошито, и прочитать или перезаписать прошивку нельзя. Чтобы убрать
                    защиту, необходимо сделать следующее <span class="attention">(Внимание! Существующая прошивка будет стёрта!)</span>:
                <ul>
                    <li>Target &rarr; Option Bytes</li>
                    <img src="../imgs/204/204_1.png" alt="изображение не найдено">
                    <li>Readout Protection &rArr; Disabled</li>
                    <li>Flash Section Protection &rArr; Unselect All</li>
                    <li>Apply</li>
                    <li>Защита снята, прошивка стерта</li>
                </ul>
            </div>
        </details>
    </div>

    <p>Проверить корректность прошивки можно подключив устройство к SARKtech, тип устройства &mdash; БДКГ-02 (перед
        подключением <span class="attention">обязательно</span> отсоединить, подключить ODU разъём):
    </p>
    <p>После проверки наклеить на плату наклейку с версией прошивки:</p>
    <img src="../imgs/204/204_9.jpg" width="600" alt="изображение не найдено">
    <ul>
        <li>Отдать на регулировку</li>
        <li>После линейки проверить <a href="file://///Inv-996/журналы градуировок/BDKG204.ods">коэффициенты</a></li>
        <li>Если всё хорошо, отдать на ПСИ</li>
        <li>Проверить на герметичность</li>
        <li>В этом БД фон настраивать не нужно. БД готов</li>
    </ul>
    <div class="tips_and_tricks">
        Удобнее всего прошивать следующим образом: открыть одновременно и STM32-Link и SARKtech и разместить оба
            окна рядом. Прошить в STM, отключить-включить питание блока и сразу проверить в SARK, подключить
            другой блок и т. д. Окна не закрывать.
            <img src="../imgs/204/201_10.png" width="800" alt="изображение не найдено">
    </div>

</div>
</div>
</body>
</html>